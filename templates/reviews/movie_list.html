{% extends 'reviews/base.html' %}

{% block content %}
<div class="container">
    <h1>All Movies</h1>
    
    <div class="filter-section">
        <a href="{% url 'movie_list' %}" class="filter-btn">All</a>
        <a href="?genre=action" class="filter-btn">Action</a>
        <a href="?genre=comedy" class="filter-btn">Comedy</a>
        <a href="?genre=drama" class="filter-btn">Drama</a>
        <a href="?genre=horror" class="filter-btn">Horror</a>
        <a href="?genre=sci-fi" class="filter-btn">Sci-Fi</a>
    </div>
    
    <div class="year-filter-section">
        <h3>Filter by Year:</h3>
        <div class="year-buttons">
            <a href="{% url 'movie_list' %}" class="year-btn {% if not current_year %}active{% endif %}">All Years</a>
            {% for year in years %}
                <a href="?year={{ year.year }}" class="year-btn {% if current_year == year.year|stringformat:'s' %}active{% endif %}">{{ year.year }}</a>
            {% endfor %}
        </div>
    </div>

    <div class="movie-grid">
        {% for movie in movies %}
            <div class="movie-card">
                {% if movie.poster %}
                    <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
                {% else %}
                    <div class="no-poster">No Poster</div>
                {% endif %}
                <div class="movie-info">
                    <h3>{{ movie.title }}</h3>
                    <p class="genre">{{ movie.get_genre_display }}</p>
                    <div class="rating">
                        ‚≠ê {{ movie.average_rating }}/10
                    </div>
                    <a href="{% url 'movie_detail' movie.pk %}" class="btn">View Details</a>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}